open Lwt


  | "read" -> string_of_int !counter
  | "inc" -> counter := !counter + 1; "Cpt incr"
  | _ -> "Unknown command"

let rec maintenir_co ic oc () =
  Lwt_io.read_line_opt ic >>=
    (fun msg ->
      match msg with
      | Some msg ->
         let reply = traiter_message msg in
         Lwt_io.write_line oc replym -> m "Connection closed") >>= return)
